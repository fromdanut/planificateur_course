!function(t,i){'use strict';function s(s,o){this.$input=t(s),this.$rating=t('<span></span>').css({cursor:'default'}).insertBefore(this.$input),this.options=function(s){return s.start=parseInt(s.start,10),s.start=isNaN(s.start)?i:s.start,s.stop=parseInt(s.stop,10),s.stop=isNaN(s.stop)?s.start+n||i:s.stop,s.step=parseInt(s.step,10)||i,s.fractions=Math.abs(parseInt(s.fractions,10))||i,s.scale=Math.abs(parseInt(s.scale,10))||i,s=t.extend({},t.fn.rating.defaults,s),s.filledSelected=s.filledSelected||s.filled,s}(t.extend({},this.$input.data(),o)),this._init()};var n=5;s.prototype={_init:function(){for(var n=this,s=this.$input,p=this.$rating,e=function(t){return function(n){s.prop('disabled')||s.prop('readonly')||s.data('readonly')!==i||t.call(this,n)}},r=1;r<=this._rateToIndex(this.options.stop);r++){var a=t('<div class="rating-symbol"></div>').css({display:'inline-block',position:'relative'});t('<div class="rating-symbol-background '+this.options.empty+'"></div>').appendTo(a),t('<div class="rating-symbol-foreground"></div>').append('<span></span>').css({display:'inline-block',position:'absolute',overflow:'hidden',left:0,right:0,width:0}).appendTo(a),p.append(a),this.options.extendSymbol.call(a,this._indexToRate(r))};this._updateRate(s.val()),s.on('change',function(){n._updateRate(t(this).val())});var o,l=function(i){var s=t(i.currentTarget),o=Math.abs((i.pageX||i.originalEvent.touches[0].pageX)-(('rtl'===s.css('direction')&&s.width())+s.offset().left));return o=o>0?o:.1*n.options.scale,s.index()+o/s.width()};p.on('mousedown touchstart','.rating-symbol',e(function(t){s.val(n._indexToRate(l(t))).change()})).on('mousemove touchmove','.rating-symbol',e(function(s){var a=n._roundToFraction(l(s));a!==o&&(o!==i&&t(this).trigger('rating.rateleave'),o=a,t(this).trigger('rating.rateenter',[n._indexToRate(o)])),n._fillUntil(a)})).on('mouseleave touchend','.rating-symbol',e(function(){o=i,t(this).trigger('rating.rateleave'),n._fillUntil(n._rateToIndex(parseFloat(s.val())))}))},_fillUntil:function(t){var s=this.$rating,i=Math.floor(t);s.find('.rating-symbol-background').css('visibility','visible').slice(0,i).css('visibility','hidden');var n=s.find('.rating-symbol-foreground');n.width(0),n.slice(0,i).width('auto').find('span').attr('class',this.options.filled),n.eq(t%1?i:i-1).find('span').attr('class',this.options.filledSelected),n.eq(i).width(t%1*100+'%')},_indexToRate:function(t){return this.options.start+Math.floor(t)*this.options.step+this.options.step*this._roundToFraction(t%1)},_rateToIndex:function(t){return(t-this.options.start)/this.options.step},_roundToFraction:function(t){var n=Math.ceil(t%1*this.options.fractions)/this.options.fractions,i=Math.pow(10,this.options.scale);return Math.floor(t)+Math.floor(n*i)/i},_contains:function(t){var i=this.options.step>0?this.options.start:this.options.stop,n=this.options.step>0?this.options.stop:this.options.start;return i<=t&&t<=n},_updateRate:function(t){var i=parseFloat(t);this._contains(i)?(this._fillUntil(this._rateToIndex(i)),this.$input.val(i)):''===t&&(this._fillUntil(0),this.$input.val(''))},rate:function(t){return t===i?this.$input.val():void this._updateRate(t)}},t.fn.rating=function(n){var o,a=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=t(this),i=e.data('rating');i||e.data('rating',i=new s(this,n)),'string'==typeof n&&'_'!==n[0]&&(o=i[n].apply(i,a))}),o!==i?o:this},t.fn.rating.defaults={filled:'glyphicon glyphicon-star',filledSelected:i,empty:'glyphicon glyphicon-star-empty',start:0,stop:n,step:1,fractions:1,scale:3,extendSymbol:function(t){}},t(function(){t('input.rating').rating()})}(jQuery);