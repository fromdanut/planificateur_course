<?php

namespace PC\PlatformBundle\Repository;

/**
 * RecipeRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class RecipeRepository extends \Doctrine\ORM\EntityRepository
{
    public function findAllWithImage()
    {
      $qb = $this
        ->createQueryBuilder('r')
        ->leftJoin('r.image', 'image')
        ->addSelect('image')
      ;

      return $qb
        ->getQuery()
        ->getResult()
      ;
    }

    public function findByShoppingListOption($quick)
    {
        $qb = $this->createQueryBuilder('r');

        // rajoute des conditions en fonction des paramÃ¨tres (tous des bool)
        if ($quick) {
            $qb->where('r.cookingTime < 120');
        }

        return $qb
          ->getQuery()
          ->getResult()
        ;
    }
}
